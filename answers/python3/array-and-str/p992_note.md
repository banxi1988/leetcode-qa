
# 笨方法学算法-K 个不同整数的子数组

## 原题
给定一个正整数数组 A，如果 A 的某个子数组中不同整数的个数恰好为 K，则称 A 的这个连续、不一定独立的子数组为好子数组。
  （例如，[1,2,3,1,2] 中有 3 个不同的整数：1，2，以及 3。）
  
  返回 A 中好子数组的数目。
  
  示例 1：
  >输出：A = [1,2,1,2,3], K = 2
  输入：7
  解释：恰好由 2 个不同整数组成的子数组：[1,2], [2,1], [1,2], [2,3], [1,2,1], [2,1,2], [1,2,1,2].
  
  示例 2：
  
  >输入：A = [1,2,1,3,4], K = 3
  输出：3
  解释：恰好由 3 个不同整数组成的子数组：[1,2,1,3], [2,1,3], [1,3,4].
   
  
  提示：
  
  1 <= A.length <= 20000
  1 <= A[i] <= A.length
  1 <= K <= A.length
  
 ## 分类讨论，归纳总结

### 只有一个最短子数组 
 K = 1
 当 K = 1 时，此题退化为计算数组A 的长度。
 
 ### K = 2
 当 K = 2 时。 
 首先假设有 1,2 两个数的数组
 
 #### 只有一个最短子数组在两边:
 1. [1,2] 解为1， 
 2. [1,2,2] 解为2.
 3. [1,2,2,2] 的解为3.
 4. [1,1,1,2] 的解也为3.
 对于这种情况，我们显然可以总结出，对于子数组的个数，就是在满足要求的子数组的基础上不断的扩展以形成新的子数组。这种情况下子数组的计算。设，i,j-1 分别为最短子数组的下标。A[i:j] 为满足要求的最短子数组。数组长度为n.
 当 i = 0或 j = n 时，解为 n-k + 1
 
 #### 只有一个最短子数组在中间
 1.  [1,1,2,2] 解为4,可以这样理解，除了中间最核心的最短子数组之外，其他的两边以排列组合来理解，可选可不选。左边多了一个1，先与不先，两种选择，右边多了一个2也是两种选择，所以 2x2 =4.
 2. [1,1,1,2,2,2] 解为 9，同上，左边3种选择，右边3种选择， 3x3=9.
 3. [1,1,1,1,2,2,2] 解为 12，同上左边4种选择，右边继续3种，4x3=12.
 
 同上，A[i:j]为满足要求的最短子数组， 于是我们可以得出解的公式如下：
 左边选择数 = (i + 1)
 右边选择数 = (n -j + 1)
 于是求解公式为: (i+1)x(n-j+1),显然当最短子数组在一边时是这种公式的特例。
 
 #### 有两个最短子数组的情况
 
 1. [1,2,1] 解为3. 以[1,2]为最短子数组为基础按上面的公式计算得 1x2 = 2,以第二个最短子数组 [2,1]为基础按上面的公式计算 2x1 = 2, 但是他们都共用了[1,2,1]这一个全数组作为子数组，所以总数是 2 + 2 -1 = 3
 
 2. [1,1,2,1] 解为5, 以[1,2]为基础子数组数为 2x2 =4,以 [2,1]为基础的子数组的个数也是 2x2=4,但是除了 [2,1] 这一基础子数组外，其他的子数组在以 [1,2] 为基础子数组的计算中出现过了。所以总的解为 4 + 1 =5
 
 3. [1,1,2,1,1] 的解为 8 ,同上道理，以[1,2]为基础子数组的数为 2x3=6,以[2,1]为基础子数组的数为 2,因为以[2,1]为基础的子数组只能向右扩展也就是选择后面的1，或者不选择。所以可选数为2。所以总的解为 6 + 2=8
 4. [1,1,2,2,1,1] 的解为 (2x4) + (2x2) = 12，以[2,1]为基础的最短子数组可以选择取或者不取左边2，只要不取到左边的[1]就OK了，因为子数组数是2X2。
 
抽象的来说：A[i1:j1] 表示第一个最短子数组，A[i2:j2] 为第二个最短子数组。
于是计算公式如下。
(i1 + 1)x(n-j1 + 1) + (i2 - (i1 + 1) + 1)*(n-j2) 

 
#### 有三个最短子数组的情况
根据上面的分析可以计算有三个最短子数组的情况.
1. [1,2,1,2]  的解为 (1x3) + (1x2) + (1x1) = 6
2. [1,1,2,1,2,2] 的解为 (2x4) + (1x3) + (1x2) = 13
2. [1,1,2,2,1,2,2] 的解为 (2x5) + (2x3) + (1x2) = 18

不失一般性可以得出如下公式：
(i1 + 1)x(n-j1 + 1) + (i2 - (i1 + 1) + 1)*(n-j2 + 1)  + (i3 - (i2+1) + 1) * (n-j3 + 1)

### K > 2 的情况
不失一般性，上述公式也可以扩展到 K > 2 的情况。
如当 K = 3 时 
1. [1,2,3]  解为 1x1 =1
2. [1,1,2,3] 解为 2x1 = 2
3. [1,1,2,3,3] 解为 2x2 = 4
4. [1,1,2,3,1] 解为 2x2 + 1x1 = 5
5. [1,1,2,3,2,1] 解为 2x3 + 2x1 = 8

### 当 K == 2，并且不同整数大于2的情况
以第一个示例为例:
A = [1,2,1,2,3], K = 2
其解为: 1x3 + 1x2 + 1x1 + 1
对于这种情况，方面计算公式中的 n 为 满足 distinct[i:n] = K 的最大N。

## 代码实现
 
   
 